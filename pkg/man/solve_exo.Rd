% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/IsisMdl_doc.R
\name{solve_exo}
\alias{solve_exo}
\title{\code{\link{IsisMdl}} method: Solve for exogenous variables numerically.}
\value{
Returns the modified \code{IsisMdl} object, where the values
of \code{exo_vars} in \code{solve_period} have been updated to the
solution found by the numerical solver.
}
\description{
This method can be used to solve for exogenous variables numerically such that
the model results for a set of target variables match their values in the
model data.

This is useful when you want to determine the required values of
exogenous variables to hit specific targets for endogenous variables.
}
\section{Usage}{

\preformatted{
mdl$solve_exo(solve_period, exo_vars, target_vars,
              report = c("period", "minimal", "no"),
              jacobian = TRUE, ...)

}

\code{mdl} is an \code{\link{IsisMdl}} object
}

\section{Arguments}{


\describe{
\item{\code{solve_period}}{A \code{\link[regts]{period}} object or a
string specifying the
period for which the exogenous variables should be solved.}
\item{\code{exo_vars}}{A character vector with the names of the exogenous
variables to solve for.}
\item{\code{target_vars}}{A character vector with the names of the target
variables. The target variables should have non-missing values in the
model data for the specified solve period.}
\item{\code{report}}{Character string controlling output verbosity. Options:
\describe{
\item{"period"}{Print a report per period (default). For each period
the final Jacobian is printed if \code{jacobian = TRUE}.}
\item{"minimal"}{Print a minimal report.}
\item{"no"}{Does not generate a report.}
}}
\item{\code{jacobian}}{A logical. If \code{TRUE} and \code{report == "period"}, the
final Jacobian used for the numerical solution is printed. The default is \code{TRUE}.}
\item{\code{...}}{Additional arguments passed to the \code{nleqslv} solver (e.g., \code{control},
\code{method}, \code{global}).}
}
}

\section{Details}{


The method determines which equations need to be run based on the
dependency structure of the model. It constructs a residual function that
runs the necessary equations and computes the difference between the
target variables' values in the model data and the values computed by
the model.

The numerical solution is found using the \code{\link[nleqslv]{nleqslv}}
function. The initial values for the exogenous variables in the solve
period are used as starting values for the numerical solver.

If the numerical solver fails to converge, \code{solve_exo} stops with
an error containing the termination code and message from \code{nleqslv},
so that the user can adjust initial guesses or solver options.
}

\examples{
library(isismdl)

# Example: Calibrating a policy variable to match target GDP
mdl_file <- tempfile(fileext = ".mdl")
writeLines(c(
    "ident C = c0 + 0.8 * (Y - T);",
    "ident Y = C + I + G;"
), mdl_file)

mdl <- isis_mdl(mdl_file, period = "2020", silent = TRUE)

# Set known parameters and components
mdl$set_values(100, names = "I", period = "2020") # investment
mdl$set_values(20, names = "T", period = "2020") # taxes

# Target: Y(2020) should be 500
mdl$set_values(500, names = "Y", period = "2020")

# Solve for G (government spending) and c0 (autonomous consumption)
# so that Y matches 500 and C (consumption) matches some dummy value
# In this model C is endogenous, but we can treat it as target if we have two instruments
mdl$set_values(400, names = "C", period = "2020")

mdl$solve_exo(
    exo_vars     = c("G", "c0"),
    target_vars  = c("Y", "C"),
    solve_period = "2020",
    report       = "minimal"
)

# Check resulting G
mdl$get_data(names = "G", period = "2020")

unlink(mdl_file)
}
\seealso{
\code{\link{solve}}, \code{\link{fill_mdl_data_solve}},
\code{\link{fill_mdl_data}}, \code{\link{get_dep_struct}}
and \code{\link[nleqslv]{nleqslv}} for details on the numerical
solver and its options.
}
