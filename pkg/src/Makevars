PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS)  $(FLIBS)
PKG_CFLAGS =
PKG_FCFLAGS = -fimplicit-none -cpp -J mod -I include -I mod

# options for lex and yacc
LEX_CMD = flex
YACC_CMD = bison
LYPREFIX = mc
LEX_YACC_DIR = lex_yacc

MODDIR = mod

all: $(MODDIR) $(SHLIB)

$(MODDIR):
	@echo creating module directoy mod
	"$(R_HOME)/bin/Rscript" -e "dir.create('$(MODDIR)', showWarnings=FALSE, recursive=TRUE)"

# rules for lex and yacc
scan.c : $(LEX_YACC_DIR)/scan.l
	$(LEX_CMD) -P$(LYPREFIX) -o$@ -i $<

xpctab.c : $(LEX_YACC_DIR)/xpctab.y 
	$(YACC_CMD) -Wno-yacc -d -p $(LYPREFIX) -o $@ $<

# dependencies of object files on header files
include deps/makedeps_c

# dependencies of object files files on mod files
include deps/makedeps_f90

# dependencies of object files on include files
mscalc.o : include/mspushf.inc  include/mspushv.inc  include/msshift.inc
